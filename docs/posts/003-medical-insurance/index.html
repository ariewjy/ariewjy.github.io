<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Aditya Arie Wijaya">
<meta name="dcterms.date" content="2022-10-27">
<meta name="description" content="Understanding Insurance Medical dataset to answer if smoking, sex, body mass index (BMI) affects the medical charges.">

<title>Medical Insurance Cost - Exploratory Analysis – Foreland of Thoughts</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../img/logo_rounded.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>
<script src="../../site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="../../site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="../../site_libs/quarto-diagram/mermaid.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../../styles.scss">
<meta property="og:title" content="Medical Insurance Cost - Exploratory Analysis – Foreland of Thoughts">
<meta property="og:description" content="Understanding Insurance Medical dataset to answer if smoking, sex, body mass index (BMI) affects the medical charges.">
<meta property="og:site_name" content="Foreland of Thoughts">
<meta property="og:locale" content="en_EN">
<meta name="twitter:title" content="Medical Insurance Cost - Exploratory Analysis – Foreland of Thoughts">
<meta name="twitter:description" content="Understanding Insurance Medical dataset to answer if smoking, sex, body mass index (BMI) affects the medical charges.">
<meta name="twitter:creator" content="@adtarie">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Foreland of Thoughts</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../publications.html"> 
<span class="menu-text">Publications</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Medical Insurance Cost - Exploratory Analysis</h1>
                  <div>
        <div class="description">
          <p>Understanding Insurance Medical dataset to answer if smoking, sex, body mass index (BMI) affects the medical charges.</p>
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">data</div>
                <div class="quarto-category">portfolio</div>
                <div class="quarto-category">python</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Aditya Arie Wijaya </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">October 27, 2022</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction-objectives" id="toc-introduction-objectives" class="nav-link active" data-scroll-target="#introduction-objectives">Introduction &amp; Objectives</a></li>
  <li><a href="#setting-up" id="toc-setting-up" class="nav-link" data-scroll-target="#setting-up">Setting-up</a></li>
  <li><a href="#importing-dataset" id="toc-importing-dataset" class="nav-link" data-scroll-target="#importing-dataset">Importing Dataset</a></li>
  <li><a href="#feature-engineering" id="toc-feature-engineering" class="nav-link" data-scroll-target="#feature-engineering">Feature Engineering</a></li>
  <li><a href="#quicklook" id="toc-quicklook" class="nav-link" data-scroll-target="#quicklook">Quicklook</a></li>
  <li><a href="#exploratory-data-analysis" id="toc-exploratory-data-analysis" class="nav-link" data-scroll-target="#exploratory-data-analysis">Exploratory Data Analysis</a>
  <ul>
  <li><a href="#overall-mean-age-of-insurance-member" id="toc-overall-mean-age-of-insurance-member" class="nav-link" data-scroll-target="#overall-mean-age-of-insurance-member">Overall Mean age of insurance member</a></li>
  <li><a href="#mean-age-bmi-and-charges-of-smoker-at-different-sex" id="toc-mean-age-bmi-and-charges-of-smoker-at-different-sex" class="nav-link" data-scroll-target="#mean-age-bmi-and-charges-of-smoker-at-different-sex">Mean <code>age</code>, <code>bmi</code> and <code>charges</code> of <code>smoker</code> at different <code>sex</code></a>
  <ul class="collapse">
  <li><a href="#distribution-of-age-categorized-based-on-sex-smoker-and-bmi_class" id="toc-distribution-of-age-categorized-based-on-sex-smoker-and-bmi_class" class="nav-link" data-scroll-target="#distribution-of-age-categorized-based-on-sex-smoker-and-bmi_class">Distribution of <code>age</code> categorized based on <code>sex</code>, <code>smoker</code>, and <code>bmi_class</code></a></li>
  </ul></li>
  <li><a href="#does-region-affecting-the-age-distribution" id="toc-does-region-affecting-the-age-distribution" class="nav-link" data-scroll-target="#does-region-affecting-the-age-distribution">Does <code>region</code> affecting the <code>age</code> distribution?</a>
  <ul class="collapse">
  <li><a href="#inspecting-the-age-vs-charges-based-on-smoker-sex-and-bmi_class-profile" id="toc-inspecting-the-age-vs-charges-based-on-smoker-sex-and-bmi_class-profile" class="nav-link" data-scroll-target="#inspecting-the-age-vs-charges-based-on-smoker-sex-and-bmi_class-profile">Inspecting the <code>age</code> vs <code>charges</code> based on <code>smoker</code>, <code>sex</code>, and <code>bmi_class</code> profile</a></li>
  </ul></li>
  <li><a href="#does-sex-affects-age-vs-charges-distributiontrend" id="toc-does-sex-affects-age-vs-charges-distributiontrend" class="nav-link" data-scroll-target="#does-sex-affects-age-vs-charges-distributiontrend">Does <code>sex</code> affects <code>age</code> vs <code>charges</code> distribution/trend?</a></li>
  <li><a href="#some-observed-outlier-group-i-a-between-group-i-and-ii" id="toc-some-observed-outlier-group-i-a-between-group-i-and-ii" class="nav-link" data-scroll-target="#some-observed-outlier-group-i-a-between-group-i-and-ii">Some observed <code>outlier (group I-a)</code> between group I and II?</a></li>
  <li><a href="#what-affects-the-outlier-i-a-group" id="toc-what-affects-the-outlier-i-a-group" class="nav-link" data-scroll-target="#what-affects-the-outlier-i-a-group">What affects the <code>outlier/ I-a</code> group?</a></li>
  </ul></li>
  <li><a href="#conclusions-and-outcomes" id="toc-conclusions-and-outcomes" class="nav-link" data-scroll-target="#conclusions-and-outcomes">Conclusions and Outcomes</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/ariewjy/ariewjy.github.io/blob/main/posts/003-medical-insurance/index.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li><li><a href="https://github.com/ariewjy/ariewjy.github.io/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<figcaption>Photo by <a href="https://unsplash.com/@towfiqu999999?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Towfiqu barbhuiya</a> on <a href="https://unsplash.com/s/photos/medical-care?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a></figcaption>
<p><img src="image.jpeg" class="img-fluid figure-img"></p>
</figure>
</div>
<section id="introduction-objectives" class="level2">
<h2 class="anchored" data-anchor-id="introduction-objectives">Introduction &amp; Objectives</h2>
<p>Health insurance plays an important role in future financial planning. Insurance members are required to pay a routine payment (insurance rates) to the insurance company. This rate will be used to pay medical bill of the insurance members. therefore, determination of insurance rate becomes a critical component to ensure the sustainability of the insurance.</p>
<p>In this project, the author wanted to do an exploratory analysis based on known variable that may correlate with the medical bill of the said members. This project will be using personal medical bills dataset (<a href="../../posts/03-project-insurance-cost-part-1/insurance.zip">insurance.zip</a>) as the main source<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>, along with the included metadata below:</p>
<ol type="1">
<li><code>age</code>: age of primary beneficiary</li>
<li><code>sex</code>: insurance contractor gender, female, male</li>
<li><code>bmi</code>: body mass index, providing an understanding of body, weights that are relatively high or low relative to height, objective index of body weight (<code>kg/m2</code>) using the ratio of height to weight, ideally <code>18.5</code> to <code>24.9</code></li>
<li><code>children</code>: number of children covered by health insurance / number of dependents</li>
<li><code>smoker</code>: smoking</li>
<li><code>region</code>: the beneficiary’s residential area in the US, northeast, southeast, southwest, northwest.</li>
<li><code>charges</code>: individual medical costs billed by health insurance</li>
</ol>
<p>At glance, bmi and smoker would likely to induce a high medical cost of a person, while age, sex, children and region may contribute in some senses or the others.</p>
<p>Objectives:</p>
<ul>
<li>Analyze the <strong>relationship</strong> between multiple <code>variables</code> to <code>medical charges</code></li>
<li>Characterize the <strong>risk profile</strong> of members, based on the said analysis</li>
<li>Determine if the <strong>insurance rate</strong> can be optimized for each <code>risk profile</code></li>
</ul>
</section>
<section id="setting-up" class="level2">
<h2 class="anchored" data-anchor-id="setting-up">Setting-up</h2>
<div id="test" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a><span class="co">#importing libraries</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="im">import</span> altair <span class="im">as</span> alt</span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="co"># import hvplot.pandas</span></span>
<span id="cb1-8"><a href="#cb1-8"></a></span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="co">#setting default theme</span></span>
<span id="cb1-10"><a href="#cb1-10"></a>sns.set_theme(style<span class="op">=</span><span class="st">'white'</span>, palette<span class="op">=</span><span class="st">'tab20'</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="importing-dataset" class="level2">
<h2 class="anchored" data-anchor-id="importing-dataset">Importing Dataset</h2>
<div id="f69c82db" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1"></a>insurance <span class="op">=</span> pd.read_csv(<span class="st">'insurance.zip'</span>)</span>
<span id="cb2-2"><a href="#cb2-2"></a>insurance.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">age</th>
<th data-quarto-table-cell-role="th">sex</th>
<th data-quarto-table-cell-role="th">bmi</th>
<th data-quarto-table-cell-role="th">children</th>
<th data-quarto-table-cell-role="th">smoker</th>
<th data-quarto-table-cell-role="th">region</th>
<th data-quarto-table-cell-role="th">charges</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>19</td>
<td>female</td>
<td>27.900</td>
<td>0</td>
<td>yes</td>
<td>southwest</td>
<td>16884.92400</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>18</td>
<td>male</td>
<td>33.770</td>
<td>1</td>
<td>no</td>
<td>southeast</td>
<td>1725.55230</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>28</td>
<td>male</td>
<td>33.000</td>
<td>3</td>
<td>no</td>
<td>southeast</td>
<td>4449.46200</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>33</td>
<td>male</td>
<td>22.705</td>
<td>0</td>
<td>no</td>
<td>northwest</td>
<td>21984.47061</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>32</td>
<td>male</td>
<td>28.880</td>
<td>0</td>
<td>no</td>
<td>northwest</td>
<td>3866.85520</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="feature-engineering" class="level2">
<h2 class="anchored" data-anchor-id="feature-engineering">Feature Engineering</h2>
<p>In this dataset, the BMI is a numeric data. In order to better analyze the dataset, the bmi data can be grouped into different class/group. The classification in this project will be using <a href="https://www.cdc.gov/healthyweight/assessing/bmi/adult_bmi/index.html">BMI classification</a> below:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>BMI</th>
<th>Weight Status</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Below 18.5</td>
<td>Underweight</td>
</tr>
<tr class="even">
<td>18.5 – 24.9</td>
<td>Healthy Weight</td>
</tr>
<tr class="odd">
<td>25.0 – 29.9</td>
<td>Overweight</td>
</tr>
<tr class="even">
<td>30.0 and Above</td>
<td>Obesity</td>
</tr>
</tbody>
</table>
<!-- :::{.callout-note}
For more granular grouping, the [classification](https://www.calculator.net/bmi-calculator) below may be used.

| Category          | BMI range - kg/m2 |
|-------------------|-------------------|
| Severe Thinness   | < 16              |
| Moderate Thinness | 16 - 17           |
| Mild Thinness     | 17 - 18.5         |
| Normal            | 18.5 - 25         |
| Overweight        | 25 - 30           |
| Obese Class I     | 30 - 35           |
| Obese Class II    | 35 - 40           |
| Obese Class III   | > 40              |
::: -->
<p>We can use <code>pandas.cut</code> method to create a quick binning over <code>bmi</code> column.</p>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1"></a>bins<span class="op">=</span> [<span class="dv">0</span>,<span class="fl">18.49</span>,<span class="fl">24.9</span>,<span class="dv">30</span>,<span class="dv">100</span>] <span class="co">#setting up the group based on bmi bins </span></span>
<span id="cb3-2"><a href="#cb3-2"></a>labels <span class="op">=</span> [</span>
<span id="cb3-3"><a href="#cb3-3"></a>         <span class="st">'underweight'</span>,</span>
<span id="cb3-4"><a href="#cb3-4"></a>         <span class="st">'healthy'</span>,</span>
<span id="cb3-5"><a href="#cb3-5"></a>         <span class="st">'overweight'</span>,</span>
<span id="cb3-6"><a href="#cb3-6"></a>         <span class="st">'obese'</span></span>
<span id="cb3-7"><a href="#cb3-7"></a>         ] <span class="co">#setting up the label on each group</span></span>
<span id="cb3-8"><a href="#cb3-8"></a></span>
<span id="cb3-9"><a href="#cb3-9"></a>insurance[<span class="st">'bmi_class'</span>]<span class="op">=</span> pd.cut(</span>
<span id="cb3-10"><a href="#cb3-10"></a>   insurance[<span class="st">'bmi'</span>], </span>
<span id="cb3-11"><a href="#cb3-11"></a>   bins<span class="op">=</span>bins, </span>
<span id="cb3-12"><a href="#cb3-12"></a>   labels<span class="op">=</span>labels,</span>
<span id="cb3-13"><a href="#cb3-13"></a>   include_lowest<span class="op">=</span><span class="va">False</span></span>
<span id="cb3-14"><a href="#cb3-14"></a>   ) <span class="co">#making the new column called bmi_class</span></span>
<span id="cb3-15"><a href="#cb3-15"></a></span>
<span id="cb3-16"><a href="#cb3-16"></a><span class="co">#sanity check on bmi_class</span></span>
<span id="cb3-17"><a href="#cb3-17"></a>(insurance</span>
<span id="cb3-18"><a href="#cb3-18"></a> .groupby(<span class="st">'bmi_class'</span>)</span>
<span id="cb3-19"><a href="#cb3-19"></a> [[<span class="st">'bmi'</span>, <span class="st">'bmi_class'</span>]]</span>
<span id="cb3-20"><a href="#cb3-20"></a> .agg([<span class="st">'min'</span>, <span class="st">'max'</span>, <span class="st">'count'</span>])</span>
<span id="cb3-21"><a href="#cb3-21"></a> <span class="co"># .style.background_gradient()</span></span>
<span id="cb3-22"><a href="#cb3-22"></a> <span class="co"># .style.text_gradient()</span></span>
<span id="cb3-23"><a href="#cb3-23"></a><span class="co">#  .T</span></span>
<span id="cb3-24"><a href="#cb3-24"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="tbl-bmi-class" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="3">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-bmi-class-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: BMI Class
</figcaption>
<div aria-describedby="tbl-bmi-class-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display" data-execution_count="19">
<div>


<table class="dataframe do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th colspan="3" data-quarto-table-cell-role="th" data-halign="left">bmi</th>
<th colspan="3" data-quarto-table-cell-role="th" data-halign="left">bmi_class</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">min</th>
<th data-quarto-table-cell-role="th">max</th>
<th data-quarto-table-cell-role="th">count</th>
<th data-quarto-table-cell-role="th">min</th>
<th data-quarto-table-cell-role="th">max</th>
<th data-quarto-table-cell-role="th">count</th>
</tr>
<tr class="header">
<th data-quarto-table-cell-role="th">bmi_class</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">underweight</td>
<td>15.96</td>
<td>18.335</td>
<td>20</td>
<td>underweight</td>
<td>underweight</td>
<td>20</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">healthy</td>
<td>18.50</td>
<td>24.890</td>
<td>222</td>
<td>healthy</td>
<td>healthy</td>
<td>222</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">overweight</td>
<td>24.97</td>
<td>30.000</td>
<td>391</td>
<td>overweight</td>
<td>overweight</td>
<td>391</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">obese</td>
<td>30.02</td>
<td>53.130</td>
<td>705</td>
<td>obese</td>
<td>obese</td>
<td>705</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div>
</div>
<p><a href="#tbl-bmi-class" class="quarto-xref">Table&nbsp;1</a> shows a new column <code>bmi_class</code> as the result of grouping the bmi data into different categories.</p>
</section>
<section id="quicklook" class="level2">
<h2 class="anchored" data-anchor-id="quicklook">Quicklook</h2>
<div id="203e9443" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1"></a>insurance.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 1338 entries, 0 to 1337
Data columns (total 8 columns):
 #   Column     Non-Null Count  Dtype   
---  ------     --------------  -----   
 0   age        1338 non-null   int64   
 1   sex        1338 non-null   object  
 2   bmi        1338 non-null   float64 
 3   children   1338 non-null   int64   
 4   smoker     1338 non-null   object  
 5   region     1338 non-null   object  
 6   charges    1338 non-null   float64 
 7   bmi_class  1338 non-null   category
dtypes: category(1), float64(2), int64(2), object(3)
memory usage: 74.8+ KB</code></pre>
</div>
</div>
<p>The data appears to be clean, with no null row, and dftypes appear to be correct. However, the format appears to be a non-tidy format.</p>
<div id="1c8afa4f" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1"></a>(insurance</span>
<span id="cb6-2"><a href="#cb6-2"></a> .select_dtypes(include<span class="op">=</span><span class="bu">object</span>) <span class="co">#includes all column with object dtypes</span></span>
<span id="cb6-3"><a href="#cb6-3"></a> .value_counts() <span class="co">#counting unique value</span></span>
<span id="cb6-4"><a href="#cb6-4"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<pre><code>sex     smoker  region   
female  no      southwest    141
                southeast    139
                northwest    135
male    no      southeast    134
female  no      northeast    132
male    no      northwest    132
                southwest    126
                northeast    125
        yes     southeast     55
                northeast     38
                southwest     37
female  yes     southeast     36
                northeast     29
                northwest     29
male    yes     northwest     29
female  yes     southwest     21
Name: count, dtype: int64</code></pre>
</div>
</div>
<p><strong>Some observations:</strong></p>
<ul>
<li><code>2</code> categorical data in <code>sex</code> column: <code>female</code> and <code>male</code></li>
<li><code>2</code> categorical data in the <code>smoker</code> column, <code>yes</code> or <code>no</code></li>
<li><code>4</code> categorical data in the <code>region</code> column: <code>southwest</code>, <code>northwest</code>, <code>southeast</code>, and <code>northeast</code></li>
</ul>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>The first attempt is to see the distribution on each variable relative to each other, depending on different categories. For example, comparing mean <code>age</code> between smoker and non-smoker group, <code>age</code> between low and high <code>bmi</code> class, etc.</p>
<p>Then trying to understand the <code>relationship</code> of each variable with respect to the <code>medical charges</code></p>
</div>
</div>
</section>
<section id="exploratory-data-analysis" class="level2">
<h2 class="anchored" data-anchor-id="exploratory-data-analysis">Exploratory Data Analysis</h2>
<p>As many people know, smoking is highly linked to clinical disease such as <em>TBC, lung cancer, hypertension</em>, etc. People with <code>smoking</code> history, may be considered a <strong>high risk profile</strong>, and as the likely outcome the <strong>medical charges may be higher</strong> than a non-smoker people.</p>
<section id="overall-mean-age-of-insurance-member" class="level3">
<h3 class="anchored" data-anchor-id="overall-mean-age-of-insurance-member">Overall Mean age of insurance member</h3>
<div id="cell-fig-mean-age" class="cell" data-execution_count="6">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1"></a>(sns</span>
<span id="cb8-2"><a href="#cb8-2"></a> .displot(</span>
<span id="cb8-3"><a href="#cb8-3"></a>     data<span class="op">=</span>insurance, </span>
<span id="cb8-4"><a href="#cb8-4"></a>     x<span class="op">=</span><span class="st">'age'</span>, </span>
<span id="cb8-5"><a href="#cb8-5"></a>     hue<span class="op">=</span><span class="st">'smoker'</span>,</span>
<span id="cb8-6"><a href="#cb8-6"></a>     kind<span class="op">=</span><span class="st">'hist'</span>,</span>
<span id="cb8-7"><a href="#cb8-7"></a>     height<span class="op">=</span><span class="dv">3</span>,</span>
<span id="cb8-8"><a href="#cb8-8"></a>     aspect<span class="op">=</span><span class="fl">1.2</span>,</span>
<span id="cb8-9"><a href="#cb8-9"></a> )</span>
<span id="cb8-10"><a href="#cb8-10"></a>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/ariewijaya/miniconda3/envs/minids/lib/python3.9/site-packages/seaborn/axisgrid.py:118: UserWarning:

The figure layout has changed to tight
</code></pre>
</div>
<div class="cell-output cell-output-display">
<div id="fig-mean-age" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-mean-age-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Overall Mean Age
</figcaption>
<div aria-describedby="fig-mean-age-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="index_files/figure-html/fig-mean-age-output-2.png" width="416" height="272" class="figure-img">
</div>
</figure>
</div>
</div>
</div>
<p>Based on distribution at <a href="#fig-mean-age" class="quarto-xref">Figure&nbsp;1</a>, the mean age for all insurance members is around <code>39</code> years old. There is also higher number of non-smoker compared to the total data (<code>2 times higher</code>) compared to smoker. There is an <code>anomaly frequency around age of 20</code> that has up to 4 times higher counts. <strong>May need further check</strong>.</p>
</section>
<section id="mean-age-bmi-and-charges-of-smoker-at-different-sex" class="level3">
<h3 class="anchored" data-anchor-id="mean-age-bmi-and-charges-of-smoker-at-different-sex">Mean <code>age</code>, <code>bmi</code> and <code>charges</code> of <code>smoker</code> at different <code>sex</code></h3>
<div class="cell" data-execution_count="7">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1"></a>(insurance</span>
<span id="cb10-2"><a href="#cb10-2"></a> .groupby([</span>
<span id="cb10-3"><a href="#cb10-3"></a>     <span class="st">'smoker'</span>,</span>
<span id="cb10-4"><a href="#cb10-4"></a>     <span class="st">'sex'</span></span>
<span id="cb10-5"><a href="#cb10-5"></a> ])</span>
<span id="cb10-6"><a href="#cb10-6"></a> </span>
<span id="cb10-7"><a href="#cb10-7"></a> [[</span>
<span id="cb10-8"><a href="#cb10-8"></a>     <span class="st">'age'</span>,</span>
<span id="cb10-9"><a href="#cb10-9"></a>     <span class="st">'bmi'</span>,</span>
<span id="cb10-10"><a href="#cb10-10"></a>     <span class="st">'charges'</span></span>
<span id="cb10-11"><a href="#cb10-11"></a>  ]]</span>
<span id="cb10-12"><a href="#cb10-12"></a> </span>
<span id="cb10-13"><a href="#cb10-13"></a> .agg([</span>
<span id="cb10-14"><a href="#cb10-14"></a>     <span class="st">'mean'</span>, </span>
<span id="cb10-15"><a href="#cb10-15"></a> ])</span>
<span id="cb10-16"><a href="#cb10-16"></a><span class="co">#  .style.background_gradient(</span></span>
<span id="cb10-17"><a href="#cb10-17"></a><span class="co">#      axis=0,</span></span>
<span id="cb10-18"><a href="#cb10-18"></a><span class="co">#      cmap="Blues"</span></span>
<span id="cb10-19"><a href="#cb10-19"></a><span class="co">#  )</span></span>
<span id="cb10-20"><a href="#cb10-20"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-smoker-based-on-sex" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="7">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-smoker-based-on-sex-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2: Statistic of Age, BMI, and Charges by Smoker and Sex
</figcaption>
<div aria-describedby="tbl-smoker-based-on-sex-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display" data-execution_count="23">
<div>


<table class="dataframe do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">age</th>
<th data-quarto-table-cell-role="th">bmi</th>
<th data-quarto-table-cell-role="th">charges</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">mean</th>
</tr>
<tr class="header">
<th data-quarto-table-cell-role="th">smoker</th>
<th data-quarto-table-cell-role="th">sex</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td rowspan="2" data-quarto-table-cell-role="th" data-valign="top">no</td>
<td data-quarto-table-cell-role="th">female</td>
<td>39.691042</td>
<td>30.539525</td>
<td>8762.297300</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">male</td>
<td>39.061896</td>
<td>30.770580</td>
<td>8087.204731</td>
</tr>
<tr class="odd">
<td rowspan="2" data-quarto-table-cell-role="th" data-valign="top">yes</td>
<td data-quarto-table-cell-role="th">female</td>
<td>38.608696</td>
<td>29.608261</td>
<td>30678.996276</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">male</td>
<td>38.446541</td>
<td>31.504182</td>
<td>33042.005975</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div>
</div>
<p>Calculating the <strong>ratio</strong> of smoker to non-smoker group</p>
<div class="cell" data-execution_count="8">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1"></a>(insurance</span>
<span id="cb11-2"><a href="#cb11-2"></a> .groupby(<span class="st">'smoker'</span>)</span>
<span id="cb11-3"><a href="#cb11-3"></a> [[<span class="st">'charges'</span>]]</span>
<span id="cb11-4"><a href="#cb11-4"></a> .agg([np.mean])<span class="op">/</span><span class="fl">8434.268298</span> <span class="co">#to calculate how high the smoker medical charges</span></span>
<span id="cb11-5"><a href="#cb11-5"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-ratio-smoker" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="8">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-ratio-smoker-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3: Ratio of Charges based on Smoker profile
</figcaption>
<div aria-describedby="tbl-ratio-smoker-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display" data-execution_count="24">
<div>


<table class="dataframe do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">charges</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">mean</th>
</tr>
<tr class="header">
<th data-quarto-table-cell-role="th">smoker</th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">no</td>
<td>1.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">yes</td>
<td>3.800001</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div>
</div>
<p>Based on the above <a href="#tbl-smoker-based-on-sex" class="quarto-xref">Table&nbsp;2</a>, the <code>male bmi is always higher</code> than the female counterpart, irrespective of its sex. Furthermore, the <code>average bmi for smoker is slightly higher than non-smoker group</code>.</p>
<p>On the other hand, <code>the average age for female is always higher</code> than its male counterpart, regardless of smoker or non-smoker.</p>
<p>As indicated by <a href="#tbl-ratio-smoker" class="quarto-xref">Table&nbsp;3</a>, the medical charges for is much higher in the smoker member, compared to non-smoker member, with up to <code>4 times higher for smoker</code></p>
<div class="cell" data-execution_count="9">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1"></a>(insurance</span>
<span id="cb12-2"><a href="#cb12-2"></a> .groupby(<span class="st">'sex'</span>)</span>
<span id="cb12-3"><a href="#cb12-3"></a> [[<span class="st">'charges'</span>]]</span>
<span id="cb12-4"><a href="#cb12-4"></a> .agg([np.mean])<span class="op">/</span><span class="fl">12569.578844</span> <span class="co">#to calculate how high the smoker medical charges</span></span>
<span id="cb12-5"><a href="#cb12-5"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-ratio-sex" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="9">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-ratio-sex-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;4: Ratio of Charges based on Sex profile
</figcaption>
<div aria-describedby="tbl-ratio-sex-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display" data-execution_count="25">
<div>


<table class="dataframe do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">charges</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">mean</th>
</tr>
<tr class="header">
<th data-quarto-table-cell-role="th">sex</th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">female</td>
<td>1.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">male</td>
<td>1.110359</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div>
</div>
<p>Furthermore, <a href="#tbl-ratio-sex" class="quarto-xref">Table&nbsp;4</a> shows that male has 10% higher medical charges compared to female counterpart.</p>
<section id="distribution-of-age-categorized-based-on-sex-smoker-and-bmi_class" class="level4">
<h4 class="anchored" data-anchor-id="distribution-of-age-categorized-based-on-sex-smoker-and-bmi_class">Distribution of <code>age</code> categorized based on <code>sex</code>, <code>smoker</code>, and <code>bmi_class</code></h4>
<div id="cell-fig-boxplot-age" class="cell" data-execution_count="10">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1"></a>(sns</span>
<span id="cb13-2"><a href="#cb13-2"></a> .catplot</span>
<span id="cb13-3"><a href="#cb13-3"></a> (data<span class="op">=</span>insurance,</span>
<span id="cb13-4"><a href="#cb13-4"></a>  kind<span class="op">=</span><span class="st">'box'</span>,</span>
<span id="cb13-5"><a href="#cb13-5"></a>  x<span class="op">=</span><span class="st">'age'</span>, </span>
<span id="cb13-6"><a href="#cb13-6"></a>  y<span class="op">=</span><span class="st">'smoker'</span>,</span>
<span id="cb13-7"><a href="#cb13-7"></a>  hue<span class="op">=</span><span class="st">'bmi_class'</span>,</span>
<span id="cb13-8"><a href="#cb13-8"></a>  col<span class="op">=</span><span class="st">'sex'</span>,</span>
<span id="cb13-9"><a href="#cb13-9"></a>  <span class="co"># col_wrap=1,</span></span>
<span id="cb13-10"><a href="#cb13-10"></a>  height<span class="op">=</span><span class="dv">4</span>,</span>
<span id="cb13-11"><a href="#cb13-11"></a>  aspect<span class="op">=</span><span class="fl">0.7</span>,</span>
<span id="cb13-12"><a href="#cb13-12"></a>  <span class="co"># showmeans=True,</span></span>
<span id="cb13-13"><a href="#cb13-13"></a>  palette<span class="op">=</span><span class="st">'Blues'</span>,</span>
<span id="cb13-14"><a href="#cb13-14"></a> )</span>
<span id="cb13-15"><a href="#cb13-15"></a>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/ariewijaya/miniconda3/envs/minids/lib/python3.9/site-packages/seaborn/axisgrid.py:118: UserWarning:

The figure layout has changed to tight
</code></pre>
</div>
<div class="cell-output cell-output-display">
<div id="fig-boxplot-age" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-boxplot-age-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Age distribution based on Categorical values
</figcaption>
<div aria-describedby="fig-boxplot-age-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="index_files/figure-html/fig-boxplot-age-output-2.png" width="647" height="368" class="figure-img">
</div>
</figure>
</div>
</div>
</div>
<p>The above <a href="#fig-boxplot-age" class="quarto-xref">Figure&nbsp;2</a> age shows a the distribution of age between smoker, bmi_class and different sex in the data. As can be seen, there is a clear <code>trend of non-smoker where as the age increases</code>, the bmi increases also, in both male and female group.</p>
<p>Whereas in the <code>smoker group, there is no clear trend of age vs bmi</code>. This can be further checked when using scatterplot between age and bmi vs charges.</p>
</section>
</section>
<section id="does-region-affecting-the-age-distribution" class="level3">
<h3 class="anchored" data-anchor-id="does-region-affecting-the-age-distribution">Does <code>region</code> affecting the <code>age</code> distribution?</h3>
<div id="cell-fig-boxplot-region" class="cell" data-execution_count="11">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1"></a>(sns</span>
<span id="cb15-2"><a href="#cb15-2"></a> .catplot</span>
<span id="cb15-3"><a href="#cb15-3"></a> (data<span class="op">=</span>insurance,</span>
<span id="cb15-4"><a href="#cb15-4"></a>  kind<span class="op">=</span><span class="st">'box'</span>,</span>
<span id="cb15-5"><a href="#cb15-5"></a>  x<span class="op">=</span><span class="st">'age'</span>, </span>
<span id="cb15-6"><a href="#cb15-6"></a>  y<span class="op">=</span><span class="st">'smoker'</span>,</span>
<span id="cb15-7"><a href="#cb15-7"></a>  hue<span class="op">=</span><span class="st">'bmi_class'</span>,</span>
<span id="cb15-8"><a href="#cb15-8"></a>  col<span class="op">=</span><span class="st">'region'</span>,</span>
<span id="cb15-9"><a href="#cb15-9"></a>  col_wrap<span class="op">=</span><span class="dv">2</span>,</span>
<span id="cb15-10"><a href="#cb15-10"></a>  height<span class="op">=</span><span class="dv">4</span>,</span>
<span id="cb15-11"><a href="#cb15-11"></a>  aspect<span class="op">=</span><span class="fl">0.7</span>,</span>
<span id="cb15-12"><a href="#cb15-12"></a>  showmeans<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb15-13"><a href="#cb15-13"></a>  palette<span class="op">=</span><span class="st">'Blues'</span>,</span>
<span id="cb15-14"><a href="#cb15-14"></a> )</span>
<span id="cb15-15"><a href="#cb15-15"></a>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/ariewijaya/miniconda3/envs/minids/lib/python3.9/site-packages/seaborn/axisgrid.py:118: UserWarning:

The figure layout has changed to tight
</code></pre>
</div>
<div class="cell-output cell-output-display">
<div id="fig-boxplot-region" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-boxplot-region-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Age distribution based on region
</figcaption>
<div aria-describedby="fig-boxplot-region-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="index_files/figure-html/fig-boxplot-region-output-2.png" width="647" height="752" class="figure-img">
</div>
</figure>
</div>
</div>
</div>
<p>As can be seen in <a href="#fig-boxplot-region" class="quarto-xref">Figure&nbsp;3</a>, the region category does not seem to bring any value to the analysis, as the pattern with/ without region data is unclear. <strong>May need further check</strong>.</p>
<section id="inspecting-the-age-vs-charges-based-on-smoker-sex-and-bmi_class-profile" class="level4">
<h4 class="anchored" data-anchor-id="inspecting-the-age-vs-charges-based-on-smoker-sex-and-bmi_class-profile">Inspecting the <code>age</code> vs <code>charges</code> based on <code>smoker</code>, <code>sex</code>, and <code>bmi_class</code> profile</h4>
<div id="cell-fig-age-charges-1" class="cell" data-execution_count="12">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1"></a>g<span class="op">=</span>(sns</span>
<span id="cb17-2"><a href="#cb17-2"></a>.relplot</span>
<span id="cb17-3"><a href="#cb17-3"></a> (data<span class="op">=</span>insurance,</span>
<span id="cb17-4"><a href="#cb17-4"></a>  x<span class="op">=</span><span class="st">'age'</span>,</span>
<span id="cb17-5"><a href="#cb17-5"></a>  y<span class="op">=</span><span class="st">'charges'</span>,</span>
<span id="cb17-6"><a href="#cb17-6"></a>  hue<span class="op">=</span><span class="st">'smoker'</span>,</span>
<span id="cb17-7"><a href="#cb17-7"></a>  size<span class="op">=</span><span class="st">'bmi_class'</span>,</span>
<span id="cb17-8"><a href="#cb17-8"></a>  style<span class="op">=</span><span class="st">'sex'</span>,</span>
<span id="cb17-9"><a href="#cb17-9"></a>  <span class="co"># legend='full',</span></span>
<span id="cb17-10"><a href="#cb17-10"></a>  <span class="co"># col='bmi_class',</span></span>
<span id="cb17-11"><a href="#cb17-11"></a>  <span class="co"># col_wrap=1,</span></span>
<span id="cb17-12"><a href="#cb17-12"></a>  height<span class="op">=</span><span class="fl">3.5</span>, </span>
<span id="cb17-13"><a href="#cb17-13"></a>  aspect<span class="op">=</span><span class="fl">1.2</span>,</span>
<span id="cb17-14"><a href="#cb17-14"></a>  markers<span class="op">=</span>[<span class="st">"8"</span>,<span class="st">"P"</span>],</span>
<span id="cb17-15"><a href="#cb17-15"></a>  palette<span class="op">=</span><span class="st">'tab10'</span>,</span>
<span id="cb17-16"><a href="#cb17-16"></a>  size_order<span class="op">=</span>[<span class="st">'obese'</span>, <span class="st">'overweight'</span>, <span class="st">'healthy'</span>, <span class="st">'underweight'</span>]</span>
<span id="cb17-17"><a href="#cb17-17"></a> )</span>
<span id="cb17-18"><a href="#cb17-18"></a>)<span class="op">;</span></span>
<span id="cb17-19"><a href="#cb17-19"></a></span>
<span id="cb17-20"><a href="#cb17-20"></a><span class="co">#setting up annotations</span></span>
<span id="cb17-21"><a href="#cb17-21"></a></span>
<span id="cb17-22"><a href="#cb17-22"></a>g.fig.text(<span class="fl">0.6</span>, <span class="fl">0.25</span>, <span class="st">"I"</span>,</span>
<span id="cb17-23"><a href="#cb17-23"></a>   color<span class="op">=</span><span class="st">"black"</span>, fontdict<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">20</span>), fontweight<span class="op">=</span><span class="st">'bold'</span></span>
<span id="cb17-24"><a href="#cb17-24"></a>          )</span>
<span id="cb17-25"><a href="#cb17-25"></a></span>
<span id="cb17-26"><a href="#cb17-26"></a>g.fig.text(<span class="fl">0.6</span>, <span class="fl">0.45</span>, <span class="st">"II"</span>,</span>
<span id="cb17-27"><a href="#cb17-27"></a>   color<span class="op">=</span><span class="st">"black"</span>, fontdict<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">20</span>), fontweight<span class="op">=</span><span class="st">'bold'</span></span>
<span id="cb17-28"><a href="#cb17-28"></a>          )</span>
<span id="cb17-29"><a href="#cb17-29"></a></span>
<span id="cb17-30"><a href="#cb17-30"></a>g.fig.text(<span class="fl">0.6</span>, <span class="fl">0.7</span>, <span class="st">"III"</span>,</span>
<span id="cb17-31"><a href="#cb17-31"></a>   color<span class="op">=</span><span class="st">"black"</span>, fontdict<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">20</span>), fontweight<span class="op">=</span><span class="st">'bold'</span></span>
<span id="cb17-32"><a href="#cb17-32"></a>          )</span>
<span id="cb17-33"><a href="#cb17-33"></a></span>
<span id="cb17-34"><a href="#cb17-34"></a>plt.suptitle(<span class="st">'age vs charges'</span>, y <span class="op">=</span> <span class="fl">1.05</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/ariewijaya/miniconda3/envs/minids/lib/python3.9/site-packages/seaborn/axisgrid.py:118: UserWarning:

The figure layout has changed to tight
</code></pre>
</div>
<div class="cell-output cell-output-display">
<div id="fig-age-charges-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-age-charges-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: Age vs Charges
</figcaption>
<div aria-describedby="fig-age-charges-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="index_files/figure-html/fig-age-charges-1-output-2.png" width="501" height="354" class="figure-img">
</div>
</figure>
</div>
</div>
</div>
<p><a href="#fig-age-charges-1" class="quarto-xref">Figure&nbsp;4</a> shows at least three groups of trend with a strong relationship between medical <code>charges</code> and <code>age</code>. As the age increases, the medical charges increases.</p>
<p><strong>The three group of medical charges are as follows:</strong></p>
<ul>
<li>group I: <code>16000</code> and below</li>
<li>group II: <code>16000-30000</code></li>
<li>group III: above <code>30000</code></li>
</ul>
<p>The three group of <code>trends</code> were heavily <code>affected</code> by the smoker/ non-smoker group, as the highest group III appears to have more points with <code>obese</code> bmi_class. This can be further checked if we exclude non-smoker group and hue it by bmi_class, and we can put sex as the column category.</p>
</section>
</section>
<section id="does-sex-affects-age-vs-charges-distributiontrend" class="level3">
<h3 class="anchored" data-anchor-id="does-sex-affects-age-vs-charges-distributiontrend">Does <code>sex</code> affects <code>age</code> vs <code>charges</code> distribution/trend?</h3>
<div id="cell-fig-age-charges-2" class="cell" data-execution_count="13">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1"></a>(sns</span>
<span id="cb19-2"><a href="#cb19-2"></a>.relplot</span>
<span id="cb19-3"><a href="#cb19-3"></a> (data<span class="op">=</span>insurance</span>
<span id="cb19-4"><a href="#cb19-4"></a>  <span class="co"># .query("smoker=='yes'")</span></span>
<span id="cb19-5"><a href="#cb19-5"></a>  ,</span>
<span id="cb19-6"><a href="#cb19-6"></a>  x<span class="op">=</span><span class="st">'age'</span>,</span>
<span id="cb19-7"><a href="#cb19-7"></a>  y<span class="op">=</span><span class="st">'charges'</span>,</span>
<span id="cb19-8"><a href="#cb19-8"></a>  hue<span class="op">=</span><span class="st">'bmi_class'</span>,</span>
<span id="cb19-9"><a href="#cb19-9"></a>  size<span class="op">=</span><span class="st">'bmi_class'</span>,</span>
<span id="cb19-10"><a href="#cb19-10"></a>  style<span class="op">=</span><span class="st">'smoker'</span>,</span>
<span id="cb19-11"><a href="#cb19-11"></a>  <span class="co"># legend='full',</span></span>
<span id="cb19-12"><a href="#cb19-12"></a>  col<span class="op">=</span><span class="st">'sex'</span>,</span>
<span id="cb19-13"><a href="#cb19-13"></a><span class="co">#   col_wrap=1,</span></span>
<span id="cb19-14"><a href="#cb19-14"></a>  <span class="co"># row='smoker',</span></span>
<span id="cb19-15"><a href="#cb19-15"></a>  height<span class="op">=</span><span class="dv">4</span>, </span>
<span id="cb19-16"><a href="#cb19-16"></a>  aspect<span class="op">=</span><span class="fl">0.7</span>,</span>
<span id="cb19-17"><a href="#cb19-17"></a>  markers<span class="op">=</span>[<span class="st">"8"</span>,<span class="st">"P"</span>],</span>
<span id="cb19-18"><a href="#cb19-18"></a>  s<span class="op">=</span><span class="dv">300</span>,</span>
<span id="cb19-19"><a href="#cb19-19"></a>  palette<span class="op">=</span><span class="st">'tab10'</span>,</span>
<span id="cb19-20"><a href="#cb19-20"></a>  alpha<span class="op">=</span><span class="fl">0.7</span>,</span>
<span id="cb19-21"><a href="#cb19-21"></a>  size_order<span class="op">=</span>[<span class="st">'obese'</span>, <span class="st">'overweight'</span>, <span class="st">'healthy'</span>, <span class="st">'underweight'</span>],</span>
<span id="cb19-22"><a href="#cb19-22"></a>  </span>
<span id="cb19-23"><a href="#cb19-23"></a> )</span>
<span id="cb19-24"><a href="#cb19-24"></a>)</span>
<span id="cb19-25"><a href="#cb19-25"></a></span>
<span id="cb19-26"><a href="#cb19-26"></a>plt.suptitle(<span class="st">'age vs charges | separated by male vs female'</span>, y <span class="op">=</span> <span class="fl">1.05</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/ariewijaya/miniconda3/envs/minids/lib/python3.9/site-packages/seaborn/axisgrid.py:118: UserWarning:

The figure layout has changed to tight
</code></pre>
</div>
<div class="cell-output cell-output-display">
<div id="fig-age-charges-2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-age-charges-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: Age vs Charges based on Sex
</figcaption>
<div aria-describedby="fig-age-charges-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="index_files/figure-html/fig-age-charges-2-output-2.png" width="643" height="405" class="figure-img">
</div>
</figure>
</div>
</div>
</div>
<p><strong>Couple conclusions can be drawn from these <a href="#fig-age-charges-1" class="quarto-xref">Figure&nbsp;4</a> and <a href="#fig-age-charges-2" class="quarto-xref">Figure&nbsp;5</a>:</strong></p>
<ol type="1">
<li>That the <code>male is likely to have higher medical charges</code> compared to female, with relatively small difference (<a href="#tbl-ratio-sex" class="quarto-xref">Table&nbsp;4</a>).</li>
<li>There are three groups of strong trend between age vs charges, where as the age increases in all trends, the medical charges is likely to increases as well.</li>
<li>The three groups can be characterized from low-high charges as follows:
<ol type="1">
<li>Group <code>I</code>: medical charges between <code>0-16,000</code>, predominantly <code>non-smoker</code>,and a mix between all bmi_class.</li>
<li>Group <code>II</code>: medical charges between <code>12,000-30,000</code>, a mix between <code>smoker and non-smoker group</code>, and bmi_class of healthy and <code>overweight</code>.</li>
<li>Group <code>III</code>: medical charges above <code>30,000</code>, predominantly <code>obese</code> bmi_class and <code>smoker</code>.</li>
</ol></li>
</ol>
</section>
<section id="some-observed-outlier-group-i-a-between-group-i-and-ii" class="level3">
<h3 class="anchored" data-anchor-id="some-observed-outlier-group-i-a-between-group-i-and-ii">Some observed <code>outlier (group I-a)</code> between group I and II?</h3>
<div id="cell-fig-outlier" class="cell" data-execution_count="14">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1"></a>g <span class="op">=</span> (sns</span>
<span id="cb21-2"><a href="#cb21-2"></a>.relplot</span>
<span id="cb21-3"><a href="#cb21-3"></a> (data<span class="op">=</span>insurance,</span>
<span id="cb21-4"><a href="#cb21-4"></a>  x<span class="op">=</span><span class="st">'age'</span>,</span>
<span id="cb21-5"><a href="#cb21-5"></a>  y<span class="op">=</span><span class="st">'charges'</span>,</span>
<span id="cb21-6"><a href="#cb21-6"></a>  hue<span class="op">=</span><span class="st">'bmi_class'</span>,</span>
<span id="cb21-7"><a href="#cb21-7"></a>  size<span class="op">=</span><span class="st">'bmi_class'</span>,</span>
<span id="cb21-8"><a href="#cb21-8"></a>  style<span class="op">=</span><span class="st">'smoker'</span>,</span>
<span id="cb21-9"><a href="#cb21-9"></a>  <span class="co"># legend='full',</span></span>
<span id="cb21-10"><a href="#cb21-10"></a>  col<span class="op">=</span><span class="st">'smoker'</span>,</span>
<span id="cb21-11"><a href="#cb21-11"></a>  <span class="co"># col_wrap=1,</span></span>
<span id="cb21-12"><a href="#cb21-12"></a>  <span class="co"># row='smoker',</span></span>
<span id="cb21-13"><a href="#cb21-13"></a>  height<span class="op">=</span><span class="dv">4</span>, </span>
<span id="cb21-14"><a href="#cb21-14"></a>  aspect<span class="op">=</span><span class="fl">0.7</span>,</span>
<span id="cb21-15"><a href="#cb21-15"></a>  markers<span class="op">=</span>[<span class="st">"8"</span>,<span class="st">"P"</span>],</span>
<span id="cb21-16"><a href="#cb21-16"></a>  s<span class="op">=</span><span class="dv">300</span>,</span>
<span id="cb21-17"><a href="#cb21-17"></a>  palette<span class="op">=</span><span class="st">'tab10'</span>,</span>
<span id="cb21-18"><a href="#cb21-18"></a>  alpha<span class="op">=</span><span class="fl">0.7</span>,</span>
<span id="cb21-19"><a href="#cb21-19"></a>  size_order<span class="op">=</span>[<span class="st">'obese'</span>, <span class="st">'overweight'</span>, <span class="st">'healthy'</span>, <span class="st">'underweight'</span>],</span>
<span id="cb21-20"><a href="#cb21-20"></a> )</span>
<span id="cb21-21"><a href="#cb21-21"></a>)<span class="op">;</span></span>
<span id="cb21-22"><a href="#cb21-22"></a></span>
<span id="cb21-23"><a href="#cb21-23"></a><span class="co">#annotations</span></span>
<span id="cb21-24"><a href="#cb21-24"></a></span>
<span id="cb21-25"><a href="#cb21-25"></a>g.fig.text(<span class="fl">0.6</span>, <span class="fl">0.22</span>, <span class="st">"I"</span>,</span>
<span id="cb21-26"><a href="#cb21-26"></a>   color<span class="op">=</span><span class="st">"black"</span>, fontdict<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">20</span>), fontweight<span class="op">=</span><span class="st">'bold'</span></span>
<span id="cb21-27"><a href="#cb21-27"></a>          )</span>
<span id="cb21-28"><a href="#cb21-28"></a></span>
<span id="cb21-29"><a href="#cb21-29"></a>g.fig.text(<span class="fl">0.3</span>, <span class="fl">0.4</span>, <span class="st">"II"</span>,</span>
<span id="cb21-30"><a href="#cb21-30"></a>   color<span class="op">=</span><span class="st">"black"</span>, fontdict<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">20</span>), fontweight<span class="op">=</span><span class="st">'bold'</span></span>
<span id="cb21-31"><a href="#cb21-31"></a>          )</span>
<span id="cb21-32"><a href="#cb21-32"></a></span>
<span id="cb21-33"><a href="#cb21-33"></a>g.fig.text(<span class="fl">0.3</span>, <span class="fl">0.63</span>, <span class="st">"III"</span>,</span>
<span id="cb21-34"><a href="#cb21-34"></a>   color<span class="op">=</span><span class="st">"black"</span>, fontdict<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">20</span>), fontweight<span class="op">=</span><span class="st">'bold'</span></span>
<span id="cb21-35"><a href="#cb21-35"></a>          )</span>
<span id="cb21-36"><a href="#cb21-36"></a></span>
<span id="cb21-37"><a href="#cb21-37"></a>g.fig.text(<span class="fl">0.65</span>, <span class="fl">0.4</span>, <span class="st">"I-a"</span>,</span>
<span id="cb21-38"><a href="#cb21-38"></a>   color<span class="op">=</span><span class="st">"black"</span>, fontdict<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">20</span>), fontweight<span class="op">=</span><span class="st">'bold'</span></span>
<span id="cb21-39"><a href="#cb21-39"></a>          )</span>
<span id="cb21-40"><a href="#cb21-40"></a></span>
<span id="cb21-41"><a href="#cb21-41"></a></span>
<span id="cb21-42"><a href="#cb21-42"></a>plt.suptitle(<span class="st">'age vs charges | separated by smoker vs non-smoker'</span>, y <span class="op">=</span> <span class="fl">1.05</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/ariewijaya/miniconda3/envs/minids/lib/python3.9/site-packages/seaborn/axisgrid.py:118: UserWarning:

The figure layout has changed to tight
</code></pre>
</div>
<div class="cell-output cell-output-display">
<div id="fig-outlier" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-outlier-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6: Outliers?
</figcaption>
<div aria-describedby="fig-outlier-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="index_files/figure-html/fig-outlier-output-2.png" width="643" height="405" class="figure-img">
</div>
</figure>
</div>
</div>
</div>
<p>If we look at the above <a href="#fig-outlier" class="quarto-xref">Figure&nbsp;6</a>, in the non-smoker group, there is a cloud of data below the group II is. This needs further check, as what would affect the scattered data across this category, as it looks like there is another factor (aside from what was plotted already) that affects the data “<strong>moves up</strong>” (<code>increased medical charges</code>)</p>
</section>
<section id="what-affects-the-outlier-i-a-group" class="level3">
<h3 class="anchored" data-anchor-id="what-affects-the-outlier-i-a-group">What affects the <code>outlier/ I-a</code> group?</h3>
<div id="cell-fig-outlier-eda" class="cell" data-execution_count="15">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1"></a>(sns</span>
<span id="cb23-2"><a href="#cb23-2"></a>.relplot</span>
<span id="cb23-3"><a href="#cb23-3"></a> (data<span class="op">=</span>insurance.query(<span class="st">'smoker == "no"'</span>),</span>
<span id="cb23-4"><a href="#cb23-4"></a>  x<span class="op">=</span><span class="st">'age'</span>,</span>
<span id="cb23-5"><a href="#cb23-5"></a>  y<span class="op">=</span><span class="st">'charges'</span>,</span>
<span id="cb23-6"><a href="#cb23-6"></a>  hue<span class="op">=</span><span class="st">'bmi_class'</span>,</span>
<span id="cb23-7"><a href="#cb23-7"></a>  <span class="co"># size='children',</span></span>
<span id="cb23-8"><a href="#cb23-8"></a>  style<span class="op">=</span><span class="st">'sex'</span>,</span>
<span id="cb23-9"><a href="#cb23-9"></a>  legend<span class="op">=</span><span class="st">'full'</span>,</span>
<span id="cb23-10"><a href="#cb23-10"></a>  col<span class="op">=</span><span class="st">'children'</span>,</span>
<span id="cb23-11"><a href="#cb23-11"></a>  col_wrap<span class="op">=</span><span class="dv">2</span>,</span>
<span id="cb23-12"><a href="#cb23-12"></a>  <span class="co"># row='region',</span></span>
<span id="cb23-13"><a href="#cb23-13"></a>  height<span class="op">=</span><span class="dv">3</span>, </span>
<span id="cb23-14"><a href="#cb23-14"></a>  aspect<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb23-15"><a href="#cb23-15"></a><span class="co">#   markers=["8","P"],</span></span>
<span id="cb23-16"><a href="#cb23-16"></a>  <span class="co"># s=400,</span></span>
<span id="cb23-17"><a href="#cb23-17"></a>  palette<span class="op">=</span><span class="st">'tab10'</span>,</span>
<span id="cb23-18"><a href="#cb23-18"></a>  alpha<span class="op">=</span><span class="fl">0.7</span>,</span>
<span id="cb23-19"><a href="#cb23-19"></a>  <span class="co"># size_order=['obese', 'overweight', 'healthy', 'underweight'],</span></span>
<span id="cb23-20"><a href="#cb23-20"></a> )</span>
<span id="cb23-21"><a href="#cb23-21"></a>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/ariewijaya/miniconda3/envs/minids/lib/python3.9/site-packages/seaborn/axisgrid.py:118: UserWarning:

The figure layout has changed to tight
</code></pre>
</div>
<div class="cell-output cell-output-display">
<div id="fig-outlier-eda" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-outlier-eda-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7: Outliers vs number of Children
</figcaption>
<div aria-describedby="fig-outlier-eda-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="index_files/figure-html/fig-outlier-eda-output-2.png" width="682" height="848" class="figure-img">
</div>
</figure>
</div>
</div>
</div>
<p><a href="#fig-outlier-eda" class="quarto-xref">Figure&nbsp;7</a> shows just group I and I-a where we see through zero to six number of <code>childrens</code>, colored by <code>bmi_class</code> and styled by <code>sex</code>. As can be seen, <strong><code>there is no clear differentiator between group I and I-a</code></strong>, as the number of children increases, it affects both group I and I-a also.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>It is unclear as to why this is happening. Perhaps other factors plays a role. At the time of this writing, author decided to categorized the group <code>I-a</code> as the outlier.</p>
</div>
</div>
<div id="cell-fig-bmi-charges" class="cell" data-execution_count="16">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1"></a>g <span class="op">=</span> (sns</span>
<span id="cb25-2"><a href="#cb25-2"></a>.relplot</span>
<span id="cb25-3"><a href="#cb25-3"></a> (data<span class="op">=</span>insurance,</span>
<span id="cb25-4"><a href="#cb25-4"></a>  x<span class="op">=</span><span class="st">'bmi'</span>,</span>
<span id="cb25-5"><a href="#cb25-5"></a>  y<span class="op">=</span><span class="st">'charges'</span>,</span>
<span id="cb25-6"><a href="#cb25-6"></a>  hue<span class="op">=</span><span class="st">'smoker'</span>,</span>
<span id="cb25-7"><a href="#cb25-7"></a>  size<span class="op">=</span><span class="st">'children'</span>,</span>
<span id="cb25-8"><a href="#cb25-8"></a>  <span class="co"># style='sex',</span></span>
<span id="cb25-9"><a href="#cb25-9"></a>  <span class="co"># legend='full',</span></span>
<span id="cb25-10"><a href="#cb25-10"></a>  <span class="co"># col='bmi_class',</span></span>
<span id="cb25-11"><a href="#cb25-11"></a>  <span class="co"># col_wrap=1,</span></span>
<span id="cb25-12"><a href="#cb25-12"></a>  height<span class="op">=</span><span class="fl">3.5</span>, </span>
<span id="cb25-13"><a href="#cb25-13"></a>  aspect<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb25-14"><a href="#cb25-14"></a>  markers<span class="op">=</span>[<span class="st">"8"</span>,<span class="st">"P"</span>],</span>
<span id="cb25-15"><a href="#cb25-15"></a>  palette<span class="op">=</span><span class="st">'tab10'</span>,</span>
<span id="cb25-16"><a href="#cb25-16"></a>  size_order<span class="op">=</span>[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>]</span>
<span id="cb25-17"><a href="#cb25-17"></a> )</span>
<span id="cb25-18"><a href="#cb25-18"></a>)</span>
<span id="cb25-19"><a href="#cb25-19"></a></span>
<span id="cb25-20"><a href="#cb25-20"></a><span class="co">#annotations</span></span>
<span id="cb25-21"><a href="#cb25-21"></a>g.fig.text(<span class="fl">0.35</span>, <span class="fl">0.25</span>, <span class="st">"I"</span>,</span>
<span id="cb25-22"><a href="#cb25-22"></a>   color<span class="op">=</span><span class="st">"black"</span>, fontdict<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">18</span>), fontweight<span class="op">=</span><span class="st">'bold'</span></span>
<span id="cb25-23"><a href="#cb25-23"></a>          )</span>
<span id="cb25-24"><a href="#cb25-24"></a></span>
<span id="cb25-25"><a href="#cb25-25"></a>g.fig.text(<span class="fl">0.35</span>, <span class="fl">0.45</span>, <span class="st">"II"</span>,</span>
<span id="cb25-26"><a href="#cb25-26"></a>   color<span class="op">=</span><span class="st">"black"</span>, fontdict<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">18</span>), fontweight<span class="op">=</span><span class="st">'bold'</span></span>
<span id="cb25-27"><a href="#cb25-27"></a>          )</span>
<span id="cb25-28"><a href="#cb25-28"></a></span>
<span id="cb25-29"><a href="#cb25-29"></a>g.fig.text(<span class="fl">0.6</span>, <span class="fl">0.65</span>, <span class="st">"III"</span>,</span>
<span id="cb25-30"><a href="#cb25-30"></a>   color<span class="op">=</span><span class="st">"black"</span>, fontdict<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">18</span>), fontweight<span class="op">=</span><span class="st">'bold'</span></span>
<span id="cb25-31"><a href="#cb25-31"></a>          )</span>
<span id="cb25-32"><a href="#cb25-32"></a></span>
<span id="cb25-33"><a href="#cb25-33"></a>g.fig.text(<span class="fl">0.5</span>, <span class="fl">0.45</span>, <span class="st">"I-a"</span>,</span>
<span id="cb25-34"><a href="#cb25-34"></a>   color<span class="op">=</span><span class="st">"black"</span>, fontdict<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">18</span>), fontweight<span class="op">=</span><span class="st">'bold'</span></span>
<span id="cb25-35"><a href="#cb25-35"></a>          )</span>
<span id="cb25-36"><a href="#cb25-36"></a></span>
<span id="cb25-37"><a href="#cb25-37"></a>plt.suptitle(<span class="st">'bmi vs charges'</span>, y <span class="op">=</span> <span class="fl">1.05</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/ariewijaya/miniconda3/envs/minids/lib/python3.9/site-packages/seaborn/axisgrid.py:118: UserWarning:

The figure layout has changed to tight
</code></pre>
</div>
<div class="cell-output cell-output-display">
<div id="fig-bmi-charges" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-bmi-charges-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;8: BMI vs Charges
</figcaption>
<div aria-describedby="fig-bmi-charges-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="index_files/figure-html/fig-bmi-charges-output-2.png" width="388" height="354" class="figure-img">
</div>
</figure>
</div>
</div>
</div>
<p>Similar to the previous <a href="#fig-age-charges-2" class="quarto-xref">Figure&nbsp;5</a>, in <a href="#fig-bmi-charges" class="quarto-xref">Figure&nbsp;8</a> we can see that the non-smoker group overlaps with the smoker group at around <code>16,000-30,000</code> medical charge range.</p>
</section>
</section>
<section id="conclusions-and-outcomes" class="level2">
<h2 class="anchored" data-anchor-id="conclusions-and-outcomes">Conclusions and Outcomes</h2>
<ol type="1">
<li><p>The insurance member can be characterzed based on the <code>smoker</code> profile, <code>age</code>, <code>bmi</code>/ <code>bmi_class</code>, and <code>sex</code> profile.</p></li>
<li><p>The <code>critical</code> factor for a high medical charges is whether member is a <code>smoker</code> or not, followed by <code>age</code> and then <code>bmi</code><a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>.</p></li>
<li><p>Other variable such as the <code>number of children</code>/ dependant is not playing a role, whereas <code>sex</code> profile <code>affect the charges slightly</code><a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>.</p></li>
<li><p>There is a <code>strong relationship between age and medical charges</code>, with <code>3</code> strong group categorized by <code>smoker</code> and <code>bmi</code> profile. The big three groups are:</p>
<ul>
<li>Group I: medical <strong>charges below 16k</strong>, related to a group of <code>non-smoker</code><a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>.</li>
<li>Group II: medical <strong>charges between 16k-30k</strong>, related to a group of <code>smoker</code> <strong>and</strong> <code>overweight</code>.</li>
<li>Group III: medical <strong>charges above 30k</strong>, related to a group of <code>smoker</code> <strong>and</strong> <code>obese</code>.</li>
</ul>
<p>These three groups have its own trendline which can be later determined (trendline).</p></li>
<li><p>There is also one <code>outlier</code> or group <code>I-a</code>, where it is <code>unclear as to what affects the medical charges increase</code> to be between group I and II.</p></li>
</ol>
<p>The above groups (<code>I, II, III</code>) can be used for <strong><code>risk profiling</code></strong>, where based on its profile, the associated risk related to medical charges can be determined. Since each group forms a trendline (simple linear regression), and can be categorized based on its smoker, and bmi profile. Based on this approach, one can estimate the optimum pricing for each risk profile (based on its medical charges).</p>
<p>See below flowchart for simple ilustration.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
    A[Member] --&gt; B{Smoking}
    B --&gt; |No| C[trendline Group I]
    B --&gt; |Yes| D{BMI Class}
    D --&gt; |Overweight| E[trendline Group II]
    D --&gt; |Obese| F[trendline Group III]
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The next step would be using some of these knowledge to further investigate the likelihood (probability) of each risk profile based on its numeric (age-bmi) and categorical variable (smoker-bmi-region-sex).</p>
</div>
</div>
<hr>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>This article was made as a replacement for medium article as part of Pacmann Data Science bootcamp assignment for Linear Algebra batch 8. The EDA notebook can be found in this <a href="https://github.com/ariewjy/ariewjy.github.io/blob/main/posts/03-project-insurance-cost-part-1/eda/aditya-66kK_capstone.ipynb">notebook</a>. Inside there will be a <a href="https://youtu.be/Zdtwk_hAqIg">Youtube</a> link as part of the assignment also.</p>
</div>
</div>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>also available at <a href="https://www.kaggle.com/datasets/mirichoi0218/insurance">Kaggle</a>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>the lowest medical charges (group I) may have obese in their profile, but since it is a non-smoker profile, the medical charges is lower.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>around 10% higher in male, compared to female counterpart (see <a href="#tbl-ratio-sex" class="quarto-xref">Table&nbsp;4</a>)<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>the BMI class shows a mix of all classes (from underweight to obese)<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{arie_wijaya2022,
  author = {Arie Wijaya, Aditya},
  title = {Medical {Insurance} {Cost} - {Exploratory} {Analysis}},
  date = {2022-10-27},
  url = {https://adtarie.net/posts/003-medical-insurance/},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-arie_wijaya2022" class="csl-entry quarto-appendix-citeas" role="listitem">
Arie Wijaya, Aditya. 2022. <span>“Medical Insurance Cost - Exploratory
Analysis.”</span> October 27, 2022. <a href="https://adtarie.net/posts/003-medical-insurance/">https://adtarie.net/posts/003-medical-insurance/</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/adtarie\.net");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="ariewjy/ariewjy.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="https://www.quarto.org">
<p>Built w/ Quarto</p>
</a>
  </li>  
</ul>
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/ariewjy/ariewjy.github.io/blob/main/posts/003-medical-insurance/index.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li><li><a href="https://github.com/ariewjy/ariewjy.github.io/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="../../license.html">
<p>License</p>
</a>
  </li>  
</ul>
    </div>
  </div>
</footer>




<script src="../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>